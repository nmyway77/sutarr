 <!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ˜íŠ¹ë¼ì´íŠ¸ ì˜ì–´ ë°°ì—´ì˜ì‘ì‘</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: 'Arial Rounded MT Bold', Arial, sans-serif; background:#fff; margin:0; }
    .header {
      background: #3b82f6; color: #fff; text-align: center;
      font-size: 1.5rem; font-weight: bold; box-shadow: 0 4px 16px rgba(0,0,0,0.07);
      margin-bottom: 18px; border-radius: 0 0 38px 38px;
      min-height: 70px; position: relative;
      display: flex; align-items: center; justify-content: center;
      padding-top: 18px; padding-bottom: 18px;
    }
    .home-btn {
      position: absolute;
      left: 22px; top: 20px;
      background: #fff; color: #2563eb;
      font-size: 1.11rem; border: none; border-radius: 17px;
      padding: 13px 28px;
      font-weight: bold; cursor: pointer; text-decoration: none;
      box-shadow: 0 2px 9px #0001;
      z-index: 2;
      display: inline-block;
      transition: background 0.15s, color 0.15s;
    }
    .home-btn:active, .home-btn:focus, .home-btn:hover {
      background: #eaf1ff; color: #1552b8;
      text-decoration: underline;
    }
    .mainbar { max-width: 550px; margin: 15px auto 0 auto; display:flex; flex-direction:column; align-items:center; gap:12px; }
    .lesson-select { padding: 9px 10px; border: 1.3px solid #2563eb; border-radius: 10px; font-size: 1.04rem; background: #fff; color: #222; width: 100%; max-width:98vw; min-width:140px; margin-bottom: 5px;}
    .main-title { text-align: center; font-size: 1.28rem; font-weight: bold; margin: 18px 0 9px 0; color: #23243a;}
    .section-tabs { display: flex; justify-content: center; flex-wrap: wrap; gap: 6px; margin: 8px 0 0 0; width: 100%;}
    .section-tab { background: #eee; color: #212a35; border:none; border-radius: 7px; padding: 6px 18px; font-size: 1.02rem; cursor:pointer; transition: background 0.14s, color 0.14s; font-weight: 500; margin-bottom: 3px;}
    .section-tab.selected { background: #2563eb; color:#fff; }
    .content-box { max-width: 96vw; min-height: 70px; margin: 22px auto 0 auto; border-radius:18px; background:#fff; box-shadow:0 6px 20px #e5eaf5; padding: 18px 8px 18px 8px; }
    .sentence-row { display: flex; align-items: flex-start; margin-bottom: 18px; }
    .sentence-content { flex: 1; }
    .en { font-size: 1.07rem; background: #fff; border: 1px solid #e3e3e3; border-radius: 9px; padding: 12px 10px; min-width: 60vw; word-break: break-all; margin-bottom: 2px; color:#2563eb;}
    .sortable { display: flex; flex-wrap: wrap; min-height: 54px; gap: 11px; margin-bottom: 11px;}
    .eng-build .word, .eng-ans .word {
      background: #2563eb; color: #fff; border: none; border-radius: 8px; padding: 7px 18px; font-size: 1em; font-weight: bold; cursor: grab;
      margin-bottom: 6px; user-select: none; transition: background 0.16s;
    }
    .eng-ans .word { background: #e0e7ef; color: #1e293b; cursor: grab;}
    .eng-build .word:active, .eng-ans .word:active { background: #1d4ed8; }
    .drag-over { outline: 2.5px solid #eab308; background: #fdf6bb !important; }
    .drag-insert { border-left: 4px solid #eab308 !important;}
    .eng-result { font-size:1em; color:#d97706; min-height:28px; font-weight: bold; margin-bottom:4px;}
    .eng-btns button {padding:5px 14px; font-size:1em; border-radius:7px; border:none; background:#3b82f6; color:#fff; cursor:pointer; margin-right:5px; font-weight:bold;}
    .eng-btns button:active {background:#194ca0;}
    @media (max-width: 500px) {
      .mainbar { max-width: 99vw; }
      .content-box { padding: 7vw 2vw;}
      .en { min-width: 10vw; font-size: 0.95rem; }
      .section-tab { font-size: 0.95rem; padding: 6px 13px;}
      .sentence-row { flex-direction: column;}
    }
  </style>
</head>
<body>
  <div class="header">
    <a class="home-btn" href="https://nmyway77.github.io/home2/">í™ˆìœ¼ë¡œ</a>
    ìˆ˜íŠ¹ë¼ì´íŠ¸ ë°°ì—´ì˜
  </div>
  <div class="mainbar">
    <select id="lessonSelect" class="lesson-select" onchange="changeLesson()"></select>
    <div class="main-title" id="mainTitle"></div>
    <div class="section-tabs" id="sectionTabs"></div>
  </div>
  <div class="content-box" id="sectionContent"></div>
<script>
  // ë°ì´í„° êµ¬ì¡° (ì˜ˆì‹œ 1-1ë§Œ, ë‚˜ë¨¸ì§€ëŠ” ë¹ˆ ë°°ì—´)
  const lessonSections = {};
  for (let i=1; i<=25; i++) lessonSections[i] = [`${i}-1`, `${i}-2`, `${i}-3`, `${i}-4`, `${i}-5`];
  const sectionSentences = {
    '1-1': [
      {en: "As the technological revolution gathers pace, education and training are thought to be the answer to everything.", ko: "ê¸°ìˆ  í˜ëª…ì´ ì†ë„ë¥¼ ë‚´ë©´ì„œ êµìœ¡ê³¼ í›ˆë ¨ì´ ëª¨ë“  ë¬¸ì œì˜ í•´ê²°ì±…ì´ë¼ê³  ì—¬ê²¨ì§„ë‹¤."},
      {en: "They are, but we have to understand the question.", ko: "ê·¸ë ‡ê¸´ í•˜ì§€ë§Œ, ìš°ë¦¬ëŠ” ë¨¼ì € ì§ˆë¬¸ì„ ì´í•´í•´ì•¼ í•œë‹¤."},
      {en: "Educating more people â€” and to a much higher standard â€” is vital.", ko: "ë” ë§ì€ ì‚¬ëŒì„ ê·¸ë¦¬ê³  í›¨ì”¬ ë” ë†’ì€ ìˆ˜ì¤€ìœ¼ë¡œ êµìœ¡í•˜ëŠ” ê²ƒì€ í•„ìˆ˜ì ì´ë‹¤."},
      {en: "But we also have to educate them differently.", ko: "í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” ë˜í•œ ê·¸ë“¤ì„ ë‹¤ë¥´ê²Œ êµìœ¡í•´ì•¼ í•œë‹¤."},
      {en: "The problem is that present expansion is based on a fundamental misconception: the confusion of academic ability with intelligence.", ko: "ë¬¸ì œëŠ” í˜„ì¬ì˜ í™•ì¥ì´ ê·¼ë³¸ì ì¸ ì˜¤í•´, ì¦‰ í•™ì—… ëŠ¥ë ¥ê³¼ ì§€ëŠ¥ì„ í˜¼ë™í•˜ëŠ” ê²ƒì— ê¸°ë°˜í•˜ê³  ìˆë‹¤ëŠ” ì ì´ë‹¤."}
    ],
    '1-2': [],
    '1-3': [],
    '1-4': [],
    '1-5': [],
    // ... '2-1', '2-2' ë“±ë„ ë™ì¼í•˜ê²Œ ì¶”ê°€
  };
  for (let i=1; i<=25; i++) for (let j=1; j<=4; j++) if (!sectionSentences[`${i}-${j}`]) sectionSentences[`${i}-${j}`] = [];

  let currentUnit = 1;
  let currentSectionIdx = 0;
  let buildStates = {};

  // ê³¼ ì…€ë ‰íŠ¸ ë°•ìŠ¤ ìë™ ìƒì„±
  function setLessonOptions() {
    const sel = document.getElementById('lessonSelect');
    sel.innerHTML = '';
    for (let i=1; i<=25; i++) {
      sel.innerHTML += `<option value="${i}">Lesson ${i}</option>`;
    }
  }
  setLessonOptions();

  function changeLesson() {
    let sel = document.getElementById('lessonSelect');
    currentUnit = parseInt(sel.value, 10);
    currentSectionIdx = 0;
    buildStates = {};
    updateUI();
  }
  function selectSection(idx) {
    currentSectionIdx = idx;
    buildStates = {};
    updateUI();
  }

  function updateUI() {
    document.getElementById('mainTitle').textContent = `Lesson ${currentUnit}`;
    document.getElementById('lessonSelect').value = currentUnit;
    let tabs = '', sections = lessonSections[currentUnit] || [];
    sections.forEach((name, idx) => {
      tabs += `<button class="section-tab${idx===currentSectionIdx?' selected':''}" onclick="selectSection(${idx})">${name}</button>`;
    });
    document.getElementById('sectionTabs').innerHTML = tabs;
    let contentHTML = '';
    const sectionKey = sections[currentSectionIdx];
    const sentArr = sectionSentences[sectionKey] || [];
    sentArr.forEach(({en, ko}, i) => {
      let st = buildStates[i] || { chosen: [], pool: shuffle(en.split(' ')), result: "" };
      buildStates[i] = st;
      contentHTML += `
        <div class="sentence-row" style="align-items: flex-start;">
          <div class="sentence-content" style="width:100%">
            <div class="en" style="margin-bottom:6px;color:#222;">${ko}</div>
            <div class="eng-ans sortable" id="ans-${i}" 
              ondragover="allowDropAns(event,${i})" ondragleave="dragLeaveAns(event,${i})" ondrop="dropAns(event,${i})">
              ${st.chosen.map((w, idx) => `
                <button class="word" draggable="true" 
                  ondragstart="dragStartAns(event,${i},${idx})"
                  onclick="removeWord(${i},${idx})"
                  data-idx="${idx}"
                  >${w}</button>
              `).join('')}
            </div>
            <div class="eng-build sortable" id="pool-${i}" 
              ondrop="dropPool(event,${i})" ondragover="allowDropPool(event)" ondragleave="dragLeavePool(event)">
              ${st.pool.map((w, idx) => `<button class="word" draggable="true" ondragstart="dragStartPool(event,${i},${idx})" onclick="chooseWord(${i},${idx})">${w}</button>`).join('')}
            </div>
            <div class="eng-btns">
              <button onclick="undoLastWord(${i})">ë˜ëŒë¦¬ê¸°</button>
              <button onclick="resetBuild(${i})">ì´ˆê¸°í™”</button>
              <button onclick="checkBuild(${i})">ì •ë‹µ í™•ì¸</button>
            </div>
            <div class="eng-result" id="engres-${i}">${st.result||""}</div>
          </div>
        </div>
      `;
    });
    document.getElementById('sectionContent').innerHTML = contentHTML || `<i>ì•„ì§ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</i>`;
  }

  // ë°°ì—´ì˜ì‘ ê¸°ëŠ¥
  function shuffle(arr) { return arr.slice().sort(() => Math.random() - 0.5);}
  function chooseWord(i, idx) {
    let st = buildStates[i];
    st.chosen.push(st.pool[idx]);
    st.pool.splice(idx,1);
    st.result="";
    updateUI();
  }
  function removeWord(i, idx) {
    let st = buildStates[i];
    st.pool.push(st.chosen[idx]);
    st.chosen.splice(idx,1);
    st.result="";
    updateUI();
  }
  function undoLastWord(i) {
    let st = buildStates[i];
    if(st.chosen.length>0) st.pool.push(st.chosen.pop());
    st.result="";
    updateUI();
  }
  function resetBuild(i) {
    let sentArr = sectionSentences[lessonSections[currentUnit][currentSectionIdx]] || [];
    buildStates[i] = {chosen:[], pool:shuffle(sentArr[i].en.split(' ')), result:""};
    updateUI();
  }
  function checkBuild(i) {
    let sentArr = sectionSentences[lessonSections[currentUnit][currentSectionIdx]] || [];
    let st = buildStates[i];
    let correct = sentArr[i].en.trim();
    let user = st.chosen.join(' ').trim();
    if(user === correct) {
      st.result = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
    } else {
      st.result = "ì •í™•íˆ ë§ì¶°ë³´ì„¸ìš”!";
    }
    updateUI();
  }

  // --- ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê´€ë ¨ ì½”ë“œ ---
  let dragData = null;
  let dragInsertIdx = null;

  // í’€(ì•„ë˜) â†’ ìœ„ë¡œ ë“œë˜ê·¸
  function dragStartPool(event, i, idx) {
    dragData = {type:'pool', i, idx};
    event.dataTransfer.effectAllowed = "move";
  }
  // ì •ë‹µì˜ì—­(ìœ„) â†’ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ë“œë˜ê·¸
  function dragStartAns(event, i, idx) {
    dragData = {type:'ans', i, idx};
    event.dataTransfer.effectAllowed = "move";
  }
  function allowDropAns(event, i) {
    event.preventDefault();
    // ë§ˆìš°ìŠ¤ê°€ ì–´ëŠ ë‹¨ì–´ ì‚¬ì´ì— ìˆëŠ”ì§€ ì²´í¬
    const container = document.getElementById(`ans-${i}`);
    const rect = container.getBoundingClientRect();
    let x = event.clientX - rect.left;
    let insert = 0;
    let total = container.children.length;
    let found = false;
    for(let k=0;k<total;k++) {
      let child = container.children[k];
      let childRect = child.getBoundingClientRect();
      if(x < (childRect.left+childRect.width/2-rect.left)) {
        child.classList.add("drag-insert");
        insert = k;
        found = true;
        break;
      } else {
        child.classList.remove("drag-insert");
      }
    }
    if(!found && total>0) {
      container.children[total-1].classList.remove("drag-insert");
    }
    dragInsertIdx = found ? insert : total;
    container.classList.add("drag-over");
  }
  function dragLeaveAns(event, i) {
    event.currentTarget.classList.remove("drag-over");
    Array.from(event.currentTarget.children).forEach(btn=>btn.classList.remove("drag-insert"));
    dragInsertIdx = null;
  }
  function dropAns(event, i) {
    event.preventDefault();
    event.currentTarget.classList.remove("drag-over");
    Array.from(event.currentTarget.children).forEach(btn=>btn.classList.remove("drag-insert"));
    let st = buildStates[i];
    if(!dragData) return;
    if(dragData.type === "pool" && dragData.i === i) {
      // í’€ì—ì„œ ìœ„ë¡œ ì˜¬ë¦¬ê¸° (ë“œë˜ê·¸)
      let word = st.pool[dragData.idx];
      st.pool.splice(dragData.idx,1);
      if (typeof dragInsertIdx === "number" && dragInsertIdx >= 0) {
        st.chosen.splice(dragInsertIdx,0,word);
      } else {
        st.chosen.push(word);
      }
    } else if(dragData.type === "ans" && dragData.i === i) {
      // ì •ë‹µì˜ì—­ ë‚´ ë‹¨ì–´ ìˆœì„œ ë°”ê¾¸ê¸°
      let [word] = st.chosen.splice(dragData.idx,1);
      let insertIdx = dragInsertIdx;
      if(insertIdx > dragData.idx) insertIdx--; // ì›ë˜ ìœ„ì¹˜ ë¹¼ê³  ë‚˜ë©´ í•œ ì¹¸ ì•ë‹¹ê²¨ì§
      st.chosen.splice(insertIdx,0,word);
    }
    st.result="";
    dragInsertIdx = null;
    dragData=null;
    updateUI();
  }
  // í’€ ì˜ì—­ ë“œë¡­ (ìœ„â†’ì•„ë˜)
  function allowDropPool(event) { event.preventDefault(); event.currentTarget.classList.add("drag-over"); }
  function dragLeavePool(event) { event.currentTarget.classList.remove("drag-over"); }
  function dropPool(event, i) {
    event.preventDefault();
    event.currentTarget.classList.remove("drag-over");
    let st = buildStates[i];
    if(!dragData) return;
    if(dragData.type === "ans" && dragData.i === i) {
      st.pool.push(st.chosen[dragData.idx]);
      st.chosen.splice(dragData.idx,1);
    }
    st.result="";
    dragData=null;
    updateUI();
  }

  updateUI();
  window.selectSection = selectSection;
  window.undoLastWord = undoLastWord;
  window.resetBuild = resetBuild;
  window.checkBuild = checkBuild;
  window.dragStartPool = dragStartPool;
  window.dragStartAns = dragStartAns;
  window.allowDropAns = allowDropAns;
  window.dragLeaveAns = dragLeaveAns;
  window.dropAns = dropAns;
  window.allowDropPool = allowDropPool;
  window.dragLeavePool = dragLeavePool;
  window.dropPool = dropPool;
  window.chooseWord = chooseWord;
  window.removeWord = removeWord;
</script>
</body>
</html>
